---
title: '[ë²ˆì—­] #5: ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ í…ŒìŠ¤íŠ¸'
date: 2022-05-13 21:19:52
category: react
thumbnail: './images/react.png'
draft: false
---


<div>

<img src="./images/2022-react-00.png">

</div>

> Thanks for [@TkDodo](https://github.com/tkdodo)
>> í•´ë‹¹ ì»¨í…ì¸ ëŠ” [ì›ê¸€](https://tkdodo.eu/blog/testing-react-query)ì„ ë²ˆì—­í•œ ê²ƒì…ë‹ˆë‹¤. ì˜¤íƒ€, ì˜¤ì—­ ì§€ì ì€ í™˜ì˜ì´ì—ìš”!

<br>

# #5: Testing React Query

í…ŒìŠ¤íŠ¸ ì£¼ì œì™€ ê´€ë ¨ëœ ì§ˆë¬¸ì€ React Queryì™€ í•¨ê»˜ ìì£¼ ë‚˜ì˜¤ë¯€ë¡œ ì—¬ê¸°ì„œ ëª‡ ê°€ì§€ ì§ˆë¬¸ì— ë‹µí•´ ë³´ê² ìŠµë‹ˆë‹¤. ê·¸ ì´ìœ  ì¤‘ í•˜ë‚˜ëŠ” "ìŠ¤ë§ˆíŠ¸" ì»´í¬ë„ŒíŠ¸(ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸ë¼ê³ ë„ í•¨)ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²Œ ì‰½ì§€ ì•Šê¸° ë•Œë¬¸ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. Hookì´ ìƒê¸°ë©´ì„œ ì´ë ‡ê²Œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì€ ëŒ€ë¶€ë¶„ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ì œëŠ” ì„ì˜ì ì¸ ë¶„ë¦¬ì™€ propsë¥¼ ë“œë¦´ ë‹¤ìš´ í•˜ê¸°ë³´ë‹¤ëŠ” í•„ìš”í•œ ê³³ì—ì„œ ì§ì ‘ Hookì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

ì €ëŠ” ì´ê²ƒìœ¼ë¡œ ì¸í•´ ì½”ë¡œì¼€ì´ì…˜ê³¼ ì½”ë“œ ê°€ë…ì„±ì´ ë§¤ìš° ì¢‹ê²Œ í–¥ìƒë˜ì—ˆë‹¤ê³  ìƒê°í•˜ì§€ë§Œ, ì´ì œ ìš°ë¦¬ëŠ” "props"ì„ ì œì™¸í•œ ì˜ì¡´ì„±ì„ ì†Œë¹„í•˜ëŠ” ë” ë§ì€ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

ì»´í¬ë„ŒíŠ¸ëŠ” ì»¨í…ìŠ¤íŠ¸ì™€ ì„ íƒê¸°, ë˜ëŠ” ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì£ .

ì´ëŸ¬í•œ ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¤ë¥¸ í™˜ê²½ì—ì„œ í˜¸ì¶œí•˜ë©´ ë‹¤ë¥¸ ê²°ê³¼ê°€ ë‚˜ì˜¤ê¸° ë•Œë¬¸ì— ê¸°ìˆ ì ìœ¼ë¡œ ë” ì´ìƒ ìˆœìˆ˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ ì‹œ ì£¼ë³€ í™˜ê²½ì„ ì£¼ì˜ ê¹Šê²Œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.

## **Mocking network requests**

React QueryëŠ” ë¹„ë™ê¸° ì„œë²„ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ê°€ ë°±ì—”ë“œì— ìš”ì²­ì„ í•  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ ì‹œ ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” ë°±ì—”ë“œë¥¼ ì‹¤ì œë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìœ¼ë©°, ë°±ì—”ë“œëŠ” í…ŒìŠ¤íŠ¸ì— ì˜ì¡´í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

jestë¡œ ë°ì´í„°ë¥¼ mockingí•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ë¸”ë¡œê·¸ê°€ ë§ì´ ìˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ë§Œì˜ API í´ë¼ì´ì–¸íŠ¸ê°€ ìˆë‹¤ë©´ mockí•  ìˆ˜ ìˆì£ . fetch ë˜ëŠ” axiosë¥¼ ì§ì ‘ mockí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì €ëŠ” Kent C. Doddsê°€ ì“´ [â€fetchë¥¼ ê·¸ë§Œ mock í•´â€](https://kentcdodds.com/blog/stop-mocking-fetch)ë¼ëŠ” ë§ì„ ë‘ ë²ˆ ì“¸ ìˆ˜ ë°–ì— ì—†ì–´ìš”.

[@ApiMocking](https://twitter.com/ApiMocking)ì—ì„œ [mock service worker](https://mswjs.io/)ë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”.

ë‹¹ì‹ ì˜ APIâ€™s ë¥¼ mock í•  ë•Œ, ê·¸ê²ƒì€ ë‹¹ì‹ ì˜ ìœ ì¼í•œ ì§„ì‹¤ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ Nodeì—ì„œ ë™ì‘í•©ë‹ˆë‹¤.
- REST ë° GraphQLì„ ì§€ì›í•©ë‹ˆë‹¤.
- ì»´í¬ë„ŒíŠ¸ì˜ *useQueryì—* ëŒ€í•œ ìŠ¤í† ë¦¬(stories)ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ [storybook addon](https://storybook.js.org/addons/msw-storybook-addon)ì´ ìˆìŠµë‹ˆë‹¤.
- ê°œë°œ ëª©ì ìœ¼ë¡œ ë¸Œë¼ìš°ì €ì—ì„œ ì‘ë™í•˜ë©°, ë¸Œë¼ìš°ì € ê°œë°œ ë„êµ¬ì—ì„œ ì „ì†¡ë˜ëŠ” ìš”ì²­ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- Cypressì™€ í•¨ê»˜ ë™ì‘í•˜ê³ , ë§¤ìš° ìœ ì‚¬í•©ë‹ˆë‹¤.

ë„¤íŠ¸ì›Œí¬ ê³„ì¸µì´ ì²˜ë¦¬ë˜ë©´, ìš°ë¦¬ëŠ” React Queryì— ëŒ€í•œ êµ¬ì²´ì ì¸ ì£¼ì˜ ì‚¬í•­ì— ëŒ€í•´ ì´ì•¼ê¸°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## **QueryClientProvider**

React Queryë¥¼ ì‚¬ìš©í•  ë•Œë§ˆë‹¤ QueryClientProviderê°€ í•„ìš”í•˜ë©° QueryCacheë¥¼ ë³´ê´€í•˜ëŠ” QueryClientë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤. ì¿¼ë¦¬ ë°ì´í„°ëŠ” ìºì‹œê°€ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.

ê° í…ŒìŠ¤íŠ¸ì— ê³ ìœ í•œ QueryClientProviderë¥¼ ì§€ì •í•˜ê³  ê° í…ŒìŠ¤íŠ¸ì— ëŒ€í•´ ìƒˆ QueryClientë¥¼ ë§Œë“œëŠ” ê²ƒì„ ì„ í˜¸í•˜ëŠ”ë°, í…ŒìŠ¤íŠ¸ëŠ” ì„œë¡œ ì™„ì „í•˜ê²Œ ê²©ë¦¬ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ì ‘ê·¼ ë°©ì‹ì€ ê° í…ŒìŠ¤íŠ¸ í›„ ìºì‹œë¥¼ ì§€ìš°ëŠ” ê²ƒì´ì§€ë§Œ, ê·¸ë˜ë„ í…ŒìŠ¤íŠ¸ ê°„ì˜ ê³µìœ  ìƒíƒœëŠ” ê°€ëŠ¥í•œ ìµœì†Œë¡œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ì•„ìš”. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ í…ŒìŠ¤íŠ¸ë¥¼ ë³‘ë ¬ë¡œ ì‹¤í–‰í•  ê²½ìš° ì˜ˆê¸°ì¹˜ ì•Šì€ ê²°ê³¼ê°€ ë°œìƒí•  ìˆ˜ ìˆê±°ë“ ìš”.

## **For custom hooks**

[react-hooks-testing-library](https://react-hooks-testing-library.com/)ë¥¼ ì‚¬ìš©í•˜ì—¬ Custom Hookì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì´ í™•ì‹¤í•©ë‹ˆë‹¤. Hook Testê°€ ì •ë§ ì‰¬ì›Œì§€ê±°ë“ ìš”. ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ [wrapper](https://react-hooks-testing-library.com/reference/api#wrapper)ë¡œ Hookì„ ê°ìŒ€ ìˆ˜ ìˆìŠµë‹ˆë‹¤. wrapperëŠ” ë Œë”ë§ ì‹œ í…ŒìŠ¤íŠ¸ êµ¬ì„± ìš”ì†Œë¥¼ ê°ìŒ€ ìˆ˜ ìˆëŠ” React ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. QueryClientëŠ” í…ŒìŠ¤íŠ¸ë‹¹ í•œ ë²ˆì”© ì‹¤í–‰ë˜ë¯€ë¡œ ì´ ì»´í¬ë„ŒíŠ¸ê°€  QueryClientë¥¼ ë§Œë“¤ê¸°ì— ì™„ë²½í•œ ì¥ì†Œë¼ê³  ìƒê°í•©ë‹ˆë‹¤.

```tsx
const createWrapper = () => {
  // âœ… creates a new QueryClient for each test
  const queryClient = new QueryClient()
  return ({ children }) => (
    <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
  )
}

test("my first test", async () => {
  const { result } = renderHook(() => useCustomHook(), {
    wrapper: createWrapper()
  })
}
```

## **For components**

useQuery Hookì„ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ QueryClientProviderì—ì„œ ë©í•‘(wrap)í•´ì•¼ í•©ë‹ˆë‹¤. [react-testing-library](https://testing-library.com/docs/react-testing-library/intro/)ì˜ render ì£¼ë³€ì˜ ì‘ì€ wrapperëŠ” ì¢‹ì€ ì„ íƒì¸ ê°™ì•„ìš”. React Queryê°€ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ [ë‚´ë¶€ì ìœ¼ë¡œ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì‚´í´ë´…ì‹œë‹¤](https://github.com/tannerlinsley/react-query/blob/ead2e5dd5237f3d004b66316b5f36af718286d2d/src/react/tests/utils.tsx#L6-L17).

## **Turn off retries**

React Queryì™€ í…ŒìŠ¤íŠ¸ì— ê´€ë ¨ëœ ê°€ì¥ ì¼ë°˜ì ì¸ "gotchas" ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. React QueryëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì§€ìˆ˜ ë°±ì˜¤í”„ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ ë²ˆ ì¬ì‹œë„í•˜ë¯€ë¡œ ì˜ëª»ëœ ì¿¼ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ëŠ” ê²½ìš° í…ŒìŠ¤íŠ¸ê°€ ì‹œê°„ ì´ˆê³¼ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¬ì‹œë„ë¥¼ í•´ì œí•˜ëŠ” ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì€ ì—­ì‹œ QueryClientProviderë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ìœ„ì˜ ì˜ˆë¥¼ í™•ì¥í•´ ë³¼ê²Œìš”.

```tsx
const createWrapper = () => {
  const queryClient = new QueryClient({
    defaultOptions: {
      queries: {
        // âœ… turns retries off
        retry: false,
      },
    },
  })

  return ({ children }) => (
    <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
  )
}

test("my first test", async () => {
  const { result } = renderHook(() => useCustomHook(), {
    wrapper: createWrapper()
  })
}
```

ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ì˜ ëª¨ë“  ì¿¼ë¦¬ì— ëŒ€í•œ ê¸°ë³¸ê°’ì„ "ì¬ì‹œë„ ì—†ìŒ"ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. ì‹¤ì œ useQueryì— ëª…ì‹œì ì¸ ì¬ì‹œë„ íšŸìˆ˜ê°€ ì„¤ì •ë˜ì–´ ìˆì§€ ì•Šì€ ê²½ìš°ì—ë§Œ í•´ë‹¹ ë©”ì„œë“œê°€ ì‘ë™í•©ë‹ˆë‹¤. 5ë²ˆì˜ ì¬ì‹œë„ë¥¼ ì›í•˜ëŠ” ì¿¼ë¦¬ê°€ ìˆëŠ” ê²½ìš°ì—ë„ ê¸°ë³¸ê°’ì€ í´ë°±ìœ¼ë¡œë§Œ ì ìš©ë˜ë¯€ë¡œ ì´ ì¿¼ë¦¬ê°€ ìš°ì„ ë©ë‹ˆë‹¤.

## **setQueryDefaults**

ì´ ë¬¸ì œì— ëŒ€í•´ ë“œë¦´ ìˆ˜ ìˆëŠ” ìµœì„ ì˜ ì¡°ì–¸ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. useQueryì—ì„œ ì§ì ‘ ì´ ì˜µì…˜ì„ ì„¤ì •í•˜ì§€ ë§ˆì„¸ìš”. ê°€ëŠ¥í•œ ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•˜ê³  ì¬ì •ì˜ ë° íŠ¹ì • ì¿¼ë¦¬ì— ëŒ€í•´ ë³€ê²½ì´ í•„ìš”í•œ ê²½ìš° [queryClient.setQueryDefaults](https://react-query.tanstack.com/reference/QueryClient#queryclientsetquerydefaults)ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

ì˜ˆë¥¼ ë“¤ì–´, useQueryì—ì„œ ì¬ì‹œë„ë¥¼ ì„¤ì •í•˜ëŠ” ëŒ€ì‹  ë‹¤ìŒì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

```tsx
const queryClient = new QueryClient()

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <Example />
    </QueryClientProvider>
  )
}

function Example() {
  // ğŸš¨ you cannot override this setting for tests!
  const queryInfo = useQuery('todos', fetchTodos, { retry: 5 })
}
```

**ì´ë ‡ê²Œ ì„¤ì •í•˜ì„¸ìš”.**

```tsx
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      retry: 2,
    },
  },
})

// âœ… only todos will retry 5 times
queryClient.setQueryDefaults('todos', { retry: 5 })

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <Example />
    </QueryClientProvider>
  )
}
```

ëª¨ë“  ì¿¼ë¦¬ëŠ” ë‘ ë²ˆ ì¬ì‹œë„í•˜ê³ , todosë§Œ ë‹¤ì„¯ ë²ˆ ì¬ì‹œë„í•˜ì§€ë§Œ í…ŒìŠ¤íŠ¸ì˜ ëª¨ë“  ì¿¼ë¦¬ëŠ” í•´ì œí•˜ë¼ëŠ” ì˜µì…˜ì„ ì—¬ì „íˆ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤ğŸ™Œ

## **ReactQueryConfigProvider**

ì´ê±´ ë‹¹ì—°íˆ ì•Œê³  ìˆëŠ” ì¿¼ë¦¬ í‚¤ì—ë§Œ ì‘ë™í•©ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ì˜ í•˜ìœ„ ì§‘í•©ì— ì¼ë¶€ë¶„ë§Œ ì„¤ì •í•˜ë ¤ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. v2ì—ì„œ ReactQueryëŠ” [ReactQueryConfigProvider](https://react-query-v2.tanstack.com/docs/api#reactqueryconfigprovider)ë¥¼ ê°€ì§€ê³ , ëª…í™•í•œ ì‚¬ìš© ì‚¬ë¡€ë„ ìˆìŠµë‹ˆë‹¤. ëª‡ ì¤„ì˜ ì½”ë“œë§Œ ì¶”ê°€í•´ì„œ v3ì—ì„œë„ ë™ì¼í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
const ReactQueryConfigProvider = ({ children, defaultOptions }) => {
  const client = useQueryClient()
  const [newClient] = React.useState(
    () =>
      new QueryClient({
        queryCache: client.getQueryCache(),
        muationCache: client.getMutationCache(),
        defaultOptions,
      })
  )

  return (
    <QueryClientProvider client={newClient}>{children}</QueryClientProvider>
  )
}
```

[ì—¬ê¸°ì„œ](https://codesandbox.io/s/react-query-config-provider-v3-lt00f) ì´ ì˜ˆì œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## **Always await the query**

React QueryëŠ” ì›ë˜ ë¹„ë™ê¸°ì´ë¯€ë¡œ Hookì„ ì‹¤í–‰í•  ë•Œ ê²°ê³¼ë¥¼ ì¦‰ì‹œ ì–»ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œëŠ” Loading ìƒíƒœë¡œ í™•ì¸í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. react-hook-testing-libraryì˜ [ë¹„ë™ê¸° ìœ í‹¸ë¦¬í‹°](https://react-hooks-testing-library.com/reference/api#async-utilities)ëŠ” ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë§ì€ ë°©ë²•ì„ ì œê³µí•˜ê³  ìˆì£ . ê°€ì¥ ê°„ë‹¨í•œ ê²½ìš° ì¿¼ë¦¬ê°€ ì„±ê³µ ìƒíƒœë¡œ ì „í™˜ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
const createWrapper = () => {
  const queryClient = new QueryClient({
    defaultOptions: {
      queries: {
        retry: false,
      },
    },
  })
  return ({ children }) => (
    <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
  )
}

test("my first test", async () => {
  const { result, waitFor } = renderHook(() => useCustomHook(), {
    wrapper: createWrapper()
  })

  // âœ… wait until the query has transitioned to success state
  await waitFor(() => result.current.isSuccess)

  expect(result.current.data).toBeDefined()
}
```

**ì—…ë°ì´íŠ¸**:

[@testing-library/react v13.1.0](https://github.com/testing-library/react-testing-library/releases/tag/v13.1.0)ì—ë„ ìƒˆë¡œìš´ [renderHook](https://testing-library.com/docs/react-testing-library/api/#renderhook)ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ *waitFor util*ì„ ìì²´ì ìœ¼ë¡œ ë°˜í™˜í•˜ì§€ ì•Šìœ¼ë‹ˆ [import from @testing-library/react](https://testing-library.com/docs/dom-testing-library/api-async/#waitfor)ì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ê²ƒì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. APIëŠ” booleanì„ ë°˜í™˜í•˜ëŠ” ê²ƒì„ í—ˆìš©í•˜ì§€ ì•Šì§€ë§Œ Promiseë¥¼ ê¸°ëŒ€í•˜ê¸° ë•Œë¬¸ì— ì¡°ê¸ˆ ë‹¤ë¥´ì£ . ì½”ë“œë¥¼ ì•½ê°„ ì¡°ì •í•´ì•¼ í•©ë‹ˆë‹¤.

```tsx
import { waitFor, renderHook } from '@testing-library/react'

test("my first test", async () => {
  const { result } = renderHook(() => useCustomHook(), {
    wrapper: createWrapper()
  })

  // âœ… return a Promise via expect to waitFor
  await waitFor(() => expect(result.current.isSuccess).toBe(true))

  expect(result.current.data).toBeDefined()
}
```

## **Silence the error console**

ê¸°ë³¸ì ìœ¼ë¡œ React QueryëŠ” ì˜¤ë¥˜ë¥¼ ì½˜ì†”ì— ì¶œë ¥í•©ë‹ˆë‹¤. ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ğŸŸ¢Â ì¸ ê²½ìš°ì—ë„ ì½˜ì†”ì— ğŸ”´Â ê°€ í‘œì‹œë˜ë¯€ë¡œ ìƒë‹¹íˆ í˜¼ë€ìŠ¤ëŸ¬ìš´ ì‘ì—…ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. React Queryë¥¼ ì‚¬ìš©í•˜ë©´ [Loggerë¥¼ ì„¤ì •](https://react-query.tanstack.com/reference/setLogger)í•˜ì—¬ ê¸°ë³¸ ë™ì‘ì„ ë®ì–´ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
import { setLogger } from 'react-query'

setLogger({
  log: console.log,
  warn: console.warn,
  // âœ… no more errors on the console
  error: () => {},
})
```

**ì—…ë°ì´íŠ¸:**

*setLogger*ê°€ v4ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ëŒ€ì‹ , custom loggerë¥¼ propìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ìƒì„±í•œ *QueryClient*ì— ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
const queryClient = new QueryClient({
  logger: {
    log: console.log,
    warn: console.warn,
    // âœ… no more errors on the console
    error: () => {},
  }
})
```

ë˜í•œ production ëª¨ë“œì—ì„œëŠ” í˜¼ë€ì„ í”¼í•˜ê¸° ìœ„í•´ ë” ì´ìƒ ì˜¤ë¥˜ê°€ ê¸°ë¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

## **Putting it all together**

ì €ëŠ” ì´ ëª¨ë“  ê²Œ ì˜ ì–´ìš¸ë¦¬ëŠ” [Github ì €ì¥ì†Œ](https://github.com/TkDodo/testing-react-query)ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤: mock-service-worker, react-testing-library, ê·¸ë¦¬ê³  ì–¸ê¸‰ë˜ì—ˆë˜ wrapper. ì—¬ê¸°ì—ëŠ” Custom Hooks ë° ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ì‹¤íŒ¨ ë° ì„±ê³µ í…ŒìŠ¤íŠ¸ ë„¤ ê°€ì§€ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

<br>