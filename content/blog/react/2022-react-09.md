---
title: '[ë²ˆì—­] #8a: ì¿¼ë¦¬ í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ í™œìš©í•˜ê¸°'
date: 2022-05-19 20:12:33
category: react
thumbnail: './images/react.png'
draft: false
---


<div>

<img src="./images/2022-react-00.png">

</div>

> Thanks for [@TkDodo](https://github.com/tkdodo)
>> í•´ë‹¹ ì»¨í…ì¸ ëŠ” [ì›ê¸€](https://tkdodo.eu/blog/leveraging-the-query-function-context)ì„ ë²ˆì—­í•œ ê²ƒì…ë‹ˆë‹¤. ì˜¤íƒ€, ì˜¤ì—­ ì§€ì ì€ í™˜ì˜ì´ì—ìš”!

<br>

# #8a: Leveraging the Query Function Context

ìš°ë¦¬ ëª¨ë‘ ë°œì „í•˜ê¸° ìœ„í•´ ë…¸ë ¥í•©ë‹ˆë‹¤. ì–´ì©Œë©´ ì´ì „ ê²ƒë“¤ë³´ë‹¤ ìƒˆë¡œìš´ ê²ƒë“¤ì„ ë°°ìš¸ì§€ë„ ëª¨ë¥´ê³ , ì´ìƒì ì´ë¼ê³  ìƒê°í–ˆë˜ íŒ¨í„´ë“¤ì´ í•„ìš”ë¡œ í•˜ëŠ” ìˆ˜ì¤€ìœ¼ë¡œ í™•ì¥ë˜ì§€ ì•Šì„ ê²ƒì´ë¼ëŠ” ê²ƒì„ ê¹¨ë‹¬ì„ ìˆ˜ ìˆì£ .

ì œê°€ ì²˜ìŒ React Queryë¥¼ ì‚¬ìš©í•œ ì´í›„ë¡œ ê½¤ ë§ì€ ì‹œê°„ì´ í˜ë €ëŠ”ë°, ì´ ê³¼ì •ì—ì„œ ë§ì€ ê²ƒì„ "ë³´ê³ " ë°°ì› ë‹¤ê³  ìƒê°í•˜ê¸°ì— ê°€ëŠ¥í•œ í•œ ë¸”ë¡œê·¸ë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ê³  ë…¸ë ¥í•˜ê³  ìˆì–´ìš”. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ë¶„ì€ ë¸”ë¡œê·¸ì— ê²Œì¬ëœ ê°œë…ì´ ì—¬ì „íˆ ìœ íš¨í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œê³  ëŒì•„ì™€ ì½ì„ ìˆ˜ ìˆì£ . ì´ê²ƒì€ Tanner Linsleyê°€ ê³µì‹ React Query ë¬¸ì„œì—ì„œ ì œ ë¸”ë¡œê·¸ë¥¼ ë§í¬í•˜ê¸°ë¡œ ë™ì˜í•œ ê²ƒê³¼ ê´€ë ¨ì´ ê¹Šì–´ìš”.

ì €ëŠ” ì´ ë¶€ë¡ì„ Effectiveí•œ React Query Keyì— ëŒ€í•´ ì“°ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. ìš°ë¦¬ê°€ ë¬´ìŠ¨ ì´ì•¼ê¸°ë¥¼ í•˜ê³  ìˆëŠ”ì§€ ì´í•´í•˜ë ¤ë©´ ê¼­ ì½ì–´ì£¼ì„¸ìš”.

## **Hot take**

> ì¸ë¼ì¸ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš” - ì£¼ì–´ì§„ Query Function Contextë¥¼ í™œìš©í•˜ê³  ê°ì²´ í‚¤ë¥¼ ìƒì„±í•˜ëŠ” Query Key factoryë¥¼ ì‚¬ìš©í•´ ì£¼ì„¸ìš”.
> 

ì¸ë¼ì¸ í•¨ìˆ˜ëŠ” Custom Hookì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ ë³€ìˆ˜ë¥¼ ë‹«ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë§¤ê°œ ë³€ìˆ˜ë¥¼ *queryFn*ì— ì „ë‹¬í•˜ëŠ” ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì…ë‹ˆë‹¤. todo ì˜ˆì œë¥¼ ì‚´í´ë³¼ê²Œìš”.

```tsx
type State = 'all' | 'open' | 'done'
type Todo = {
  id: number
  state: TodoState
}
type Todos = ReadonlyArray<Todo>

const fetchTodos = async (state: State): Promise<Todos> => {
  const response = await axios.get(`todos/${state}`)
  return response.data
}

export const useTodos = () => {
  // imagine this grabs the current user selection
  // from somewhere, e.g. the url
  const { state } = useTodoParams()

  // âœ… The queryFn is an inline function that
  // closures over the passed state
  return useQuery(['todos', state], () => fetchTodos(state))
}
```

ì˜ˆë¥¼ ë³¸ ì ì´ ìˆì„ê±°ì—ìš”. [#1: Practical React Query - Treat the query key like a dependency array](https://tkdodo.eu/blog/practical-react-query#treat-the-query-key-like-a-dependency-array)ë¥¼ ì•½ê°„ ë³€í˜•í–ˆê¸° ë•Œë¬¸ì´ì£ . ì´ê±´ ê°„ë‹¨í•œ ì˜ˆì œë¡œì¨ ì˜ ë™ì‘í•˜ì§€ë§Œ ë§¤ê°œ ë³€ìˆ˜ê°€ ë§ì„ ë•ŒëŠ” ìƒë‹¹íˆ ë¬¸ì œê°€ ë§ìŠµë‹ˆë‹¤. ë” í° ì•±ì—ì„œëŠ” ë§ì€ í•„í„°ì™€ ì •ë ¬ ì˜µì…˜ì´ ìˆì„ ê²ƒì´ê³ , ì €ëŠ” ìµœëŒ€ 10ê°œì˜ ë§¤ê°œ ë³€ìˆ˜ê°€ ì¡´ì¬í•˜ëŠ” ê²ƒë„ ë³´ì•˜ì–´ìš”.

ì¿¼ë¦¬ì— ì •ë ¬ì„ ì¶”ê°€í•˜ë ¤ê³  í•©ë‹ˆë‹¤. ì €ëŠ” ì´ëŸ´ ë•Œ ì•„ë˜ì—ì„œ ìœ„(bottom up)ë¡œ ì ‘ê·¼í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. *queryFn*ë¶€í„° ì‹œì‘í•´ì„œ ì»´íŒŒì¼ëŸ¬ê°€ ë‹¤ìŒì— ë¬´ì—‡ì„ ë³€ê²½í•´ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì£¼ë„ë¡ í•´ë³¼ê¹Œìš”?

```tsx
type Sorting = 'dateCreated' | 'name'
const fetchTodos = async (
  state: State,
  sorting: Sorting
): Promise<Todos> => {
  const response = await axios.get(`todos/${state}?sorting=${sorting}`)
  return response.data
}
```

ë‹¨, ì´ë ‡ê²Œ í•˜ë©´ fetchTodosë¼ê³  í•˜ëŠ” Custom Hookì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ í•´ê²°í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.

```tsx
export const useTodos = () => {
  const { state, sorting } = useTodoParams()

  // ğŸš¨ can you spot the mistake â¬‡ï¸
  return useQuery(['todos', state], () => fetchTodos(state, sorting))
}
```

ì´ë¯¸ ë¬¸ì œë¥¼ ë°œê²¬í•˜ì…¨ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. *queryKey*ëŠ” ì‹¤ì œ ì˜ì¡´ì„±ê³¼ ë™ê¸°í™”ë˜ì§€ ì•Šì•˜ìœ¼ë©°, ì´ì— ëŒ€í•´ ì˜¤ë¥˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¹¨ê°„ ì¤„ì€ ì—†ì£ ğŸ˜”  ìœ„ì˜ ê²½ìš° ì •ë ¬ì„ ë³€ê²½í•´ë„ ìë™ìœ¼ë¡œ refetchê°€ íŠ¸ë¦¬ê±°ë˜ì§€ ì•Šìœ¼ë‹ˆ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ë¬¸ì œë¥¼ ë§¤ìš° ë¹ ë¥´ê²Œ ë°œê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì†”ì§íˆ ì´ ê°„ë‹¨í•œ ì˜ˆì—ì„œë„ ëª…í™•í•´ ë³´ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì§€ë‚œ ëª‡ ë‹¬ ë™ì•ˆ ì¿¼ë¦¬ í‚¤ê°€ ì‹¤ì œ ì¢…ì†ì„±ê³¼ ë‹¤ë¥¸ ê²ƒì„ ëª‡ ë²ˆ ë³´ì•˜ìŠµë‹ˆë‹¤. ë” ë³µì¡í• ìˆ˜ë¡ ë¬¸ì œë¥¼ ì¶”ì í•˜ê¸° ì–´ë µê²Œ ë§Œë“¤ ìˆ˜ ìˆë„ ìˆì£ . ë˜í•œ Reactì— [react-hooks/exhaustive-deps eslint rule](https://reactjs.org/docs/hooks-rules.html#eslint-plugin) ê·œì¹™ì´ ì ìš©ë˜ëŠ” ì´ìœ ë„ ìˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ ì´ì œ React Queryì— ìì²´ eslint ê·œì¹™ì„ ì ìš©í•´ì•¼ í• ê¹Œìš”? ğŸ‘€

í•œ ê°€ì§€ ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  ì¢…ì†ì„±ì„ í¬í•¨í•˜ì—¬ ì¿¼ë¦¬ í‚¤ë¥¼ ìƒì„±í•˜ì—¬ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” [babel-plugin-react-query-key-gen](https://github.com/dominictwlee/babel-plugin-react-query-key-gen) ë§ì´ì£ . ê·¸ëŸ¬ë‚˜ React Queryì—ëŠ” ì¢…ì†ì„±ì„ ì²˜ë¦¬í•˜ëŠ” ë‹¤ë¥¸ ê¸°ë³¸ ë©”ì„œë“œê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ë°, ë°”ë¡œ `QueryFunctionContext`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ë‹ˆë‹¤.

## **QueryFunctionContext**

*QueryFunctionContext*ëŠ” *queryFn*ì— ì¸ìˆ˜ë¡œ ì „ë‹¬ë˜ëŠ” ê°ì²´ì…ë‹ˆë‹¤. ë¬´í•œ ì¿¼ë¦¬ ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ ì‚¬ìš©í•œ ì ì´ ìˆì—ˆì„ ê±°ì—ìš”.

```tsx
// this is the QueryFunctionContext â¬‡ï¸
const fetchProjects = ({ pageParam = 0 }) =>
  fetch('/api/projects?cursor=' + pageParam)

useInfiniteQuery('projects', fetchProjects, {
  getNextPageParam: (lastPage) => lastPage.nextCursor,
})
```

React QueryëŠ” í•´ë‹¹ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ì— ëŒ€í•œ ì •ë³´ë¥¼ queryFnì— ì£¼ì…í•©ë‹ˆë‹¤. ë¬´í•œ ì¿¼ë¦¬ì˜ ê²½ìš° *getNextPageParam*ì´ *pageParam*ìœ¼ë¡œ ì‚½ì…ëœ ë°˜í™˜ ê°’ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ ì»¨í…ìŠ¤íŠ¸ì—ëŠ” ì´ ì¿¼ë¦¬ì— ì‚¬ìš©ë˜ëŠ” *queryKey*ë„ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤(ê·¸ë¦¬ê³  ìš°ë¦¬ëŠ” ë” ë©‹ì§„ ê±¸ contextì— ì¶”ê°€í•˜ë ¤ê³  í•´ìš”). ì¦‰, React Queryì— ì˜í•´ ì œê³µë˜ë¯€ë¡œ ì§ì ‘ í´ë¡œì €ì— ê°€ë‘ì§€ ì•Šì•„ë„ ë¼ìš”.

```tsx
const fetchTodos = async ({ queryKey }) => {
  // ğŸš€ we can get all params from the queryKey
  const [, state, sorting] = queryKey
  const response = await axios.get(`todos/${state}?sorting=${sorting}`)
  return response.data
}

export const useTodos = () => {
  const { state, sorting } = useTodoParams()

  // âœ… no need to pass parameters manually
  return useQuery(['todos', state, sorting], fetchTodos)
}
```

ê¸°ë³¸ì ìœ¼ë¡œ *queryFnì—ì„œ* ë§¤ê°œ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ *queryKey*ì— ì¶”ê°€í•˜ì§€ ì•Šì•„ë„ ë¼ìš” ğŸ‰

## **How to type the QueryFunctionContext**

ì´ ì ‘ê·¼ ë°©ì‹ì˜ ëª©í‘œ ì¤‘ í•˜ë‚˜ëŠ” ì „ì²´ íƒ€ì… ì•ˆì „ì„±ì„ í™•ë³´í•˜ê³  *useQuery*ì— ì „ë‹¬ëœ *queryKey*ì—ì„œ *QueryFunctionContext*ì˜ íƒ€ì…ì„ ì¶”ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì‰½ì§€ ì•Šì•˜ì§€ë§Œ React QueryëŠ” [v3.13.3](https://github.com/tannerlinsley/react-query/releases/tag/v3.13.3)ë¶€í„° ì´ë¥¼ ì§€ì›í•˜ì£ . ë§Œì•½ *queryFnì´ ì¸ë¼ì¸ ë˜ì–´ ìˆë‹¤ë©´* íƒ€ì…ì´ ì˜¬ë°”ë¥´ê²Œ ì¶”ë¡ ë˜ì–´ ìˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤(ê°ì‚¬í•´ìš”, Generics).

```tsx
export const useTodos = () => {
  const { state, sorting } = useTodoParams()

  return useQuery(
    ['todos', state, sorting] as const,
    async ({ queryKey }) => {
      const response = await axios.get(
        // âœ… this is safe because the queryKey is a tuple
        `todos/${queryKey[1]}?sorting=${queryKey[2]}`
      )
      return response.data
    }
  )
}
```

ë„ˆë¬´ í›Œë¥­í•˜ì§€ë§Œ, ì—¬ì „íˆ ë§ì€ ë‹¨ì ì´ ìˆì–´ìš”.

- ë‹¹ì‹ ì€ ì—¬ì „íˆ ë¬´ì–¸ê°€ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í´ë¡œì € ë‚´ë¶€ì— ì¿¼ë¦¬ë¥¼ ë§Œë“¤ì–´ ë‘¬ì•¼ í•©ë‹ˆë‹¤.
- *queryKey*ë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ„ì˜ ë°©ë²•ìœ¼ë¡œ URLì„ ì‘ì„±í•˜ëŠ” ê²ƒì€ ëª¨ë“  ë¬¸ìì—´ì„ ì§€ì •í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì—¬ì „íˆ ì•ˆì „í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

## **Query Key Factories**

ì—¬ê¸°ì„œ query key factoriesì´ ë‹¤ì‹œ ë“±ì¥í•©ë‹ˆë‹¤. í‚¤ë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•œ typesafe query key factoryê°€ ìˆëŠ” ê²½ìš° í•´ë‹¹ íŒ©í† ë¦¬ì˜ ë°˜í™˜ íƒ€ì…ì„ ì‚¬ìš©í•˜ì—¬ *QueryFunctionContext*ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆì£ . ì´ë ‡ê²Œ ë§ì´ì—ìš”.

```tsx
const todoKeys = {
  all: ['todos'] as const,
  lists: () => [...todoKeys.all, 'list'] as const,
  list: (state: State, sorting: Sorting) =>
    [...todoKeys.lists(), state, sorting] as const,
}

const fetchTodos = async ({
  queryKey,
}: // ğŸ¤¯ only accept keys that come from the factory
QueryFunctionContext<ReturnType<typeof todoKeys['list']>>) => {
  const [, , state, sorting] = queryKey
  const response = await axios.get(`todos/${state}?sorting=${sorting}`)
  return response.data
}

export const useTodos = () => {
  const { state, sorting } = useTodoParams()

  // âœ… build the key via the factory
  return useQuery(todoKeys.list(state, sorting), fetchTodos)
}
```

*QueryFunctionContext* íƒ€ì…ì€ ReactQueryì— ì˜í•´  export ë©ë‹ˆë‹¤. *queryKey*ì˜ íƒ€ì…ì„ ì •ì˜í•˜ëŠ” í•˜ë‚˜ì˜ ì œë„¤ë¦­ì„ ì‚¬ìš©í•˜ì£ . ìœ„ ì˜ˆì œì—ì„œ ìš° ë¦¬ë§ key factoriesê°€ ë°˜í™˜í•˜ëŠ” list í•¨ìˆ˜ê°€ ëª¨ë“  ê²ƒê³¼ ê°™ë„ë¡ ì„¤ì •í–ˆìŠµë‹ˆë‹¤. [ìƒìˆ˜ ë‹¨ì–¸](https://tkdodo.eu/blog/the-power-of-const-assertions)ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ëª¨ë“  í‚¤ëŠ” ì—„ê²©í•˜ê²Œ íƒ€ì´í•‘ë©ë‹ˆë‹¤. ë”°ë¼ì„œ í•´ë‹¹ êµ¬ì¡°ì— ë§ì§€ ì•ŠëŠ” í‚¤ë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•˜ë©´ íƒ€ì… ì˜¤ë¥˜ê°€ ë°œìƒí•´ìš”.

## **Object Query Keys**

ìœ„ì˜ ì ‘ê·¼ ë°©ì‹ìœ¼ë¡œ ì„œì„œíˆ ì „í™˜í•˜ëŠ” ë™ì•ˆ ë°°ì—´ í‚¤ë“¤ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì¿¼ë¦¬ í‚¤ë¥¼ ì‚­ì œí•˜ëŠ” ë°©ë²•ì„ ë³´ë©´ í™•ì‹¤í•´ì ¸ìš”.

```tsx
const [, , state, sorting] = queryKey
```

ê¸°ë³¸ì ìœ¼ë¡œ ì²˜ìŒ ë‘ ë¶€ë¶„(í•˜ë“œì½”ë”©ëœ *todo*ì™€ *list*)ì€ ìƒëµí•˜ê³  ë™ì  ë¶€ë¶„ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¬¼ë¡ , ìš°ë¦¬ê°€ ì²˜ìŒì— ë‹¤ë¥¸ ë²”ìœ„ë¥¼ ì¶”ê°€í•  ë•Œê¹Œì§€ ì˜¤ë˜ ê±¸ë¦¬ì§€ ì•Šì•˜ì§€ë§Œ ë‹¤ì‹œ ì˜ëª»ëœ URLë¡œ ì´ì–´ì¡Œì–´ìš”.

*objects*ëŠ” ì´ ë¬¸ì œë¥¼ ì•„ì£¼ ì˜ í•´ê²°í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ named destructuringë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë˜í•œ ì¿¼ë¦¬ ë¬´íš¨í™”(query invalidation) ëŒ€í•œ fuzzy matching(Approximate String Matching, ê·¼ì ‘ ë¬¸ìì—´ ë§¤ì¹­ ë˜ëŠ” í¼ì§€ ë¬¸ìì—´ ê²€ìƒ‰)ê³¼ ë™ì¼í•˜ê²Œ ì‘ë™í•˜ê¸° ë•Œë¬¸ì— ì¿¼ë¦¬ í‚¤ ë‚´ì—ì„œ ì‚¬ìš©ë  ë•Œ ë‹¨ì ì´ ì—†ìŠµë‹ˆë‹¤. partialDeepEqual í•¨ìˆ˜ê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ê´€ì‹¬ì´ ìˆë‹¤ë©´ [ì—¬ê¸°ì„œ](https://github.com/tannerlinsley/react-query/blob/9e414e8b4f3118b571cf83121881804c0b58a814/src/core/utils.ts#L321-L338) í™•ì¸í•´ë³´ì„¸ìš”. 

ì´ë¥¼ ì—¼ë‘ì— ë‘ê³ , ì•Œê³  ìˆëŠ” ì •ë³´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ í‚¤ë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```tsx
const todoKeys = {
  // âœ… all keys are arrays with exactly one object
  all: [{ scope: 'todos' }] as const,
  lists: () => [{ ...todoKeys.all[0], entity: 'list' }] as const,
  list: (state: State, sorting: Sorting) =>
    [{ ...todoKeys.lists()[0], state, sorting }] as const,
}

const fetchTodos = async ({
  // âœ… extract named properties from the queryKey
  queryKey: [{ state, sorting }],
}: QueryFunctionContext<ReturnType<typeof todoKeys['list']>>) => {
  const response = await axios.get(`todos/${state}?sorting=${sorting}`)
  return response.data
}

export const useTodos = () => {
  const { state, sorting } = useTodoParams()

  return useQuery(todoKeys.list(state, sorting), fetchTodos)
}
```

ê°ì²´ ì¿¼ë¦¬ í‚¤ëŠ” ìˆœì„œê°€ ì—†ê¸° ë•Œë¬¸ì— í¼ì§€ ë§¤ì¹­ ê¸°ëŠ¥ì„ ë”ìš± ê°•ë ¥í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤. ë°°ì—´ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ íŠ¹ì • í•„í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  todo lists ë˜ëŠ” ë‹¨ì¼ todo listì™€ ê´€ë ¨ëœ ëª¨ë“  ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ì²´ í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆì§€ë§Œ, ë‹¤ìŒì„ ì›í•  ê²½ìš° ëª¨ë“  ëª©ë¡(ì˜ˆ: todo lists ë° profile lists)ì„ ì²˜ë¦¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

```tsx
// ğŸ•º remove everything related to the todos feature
queryClient.removeQueries([{ scope: 'todos' }])

// ğŸš€ reset all todo lists
queryClient.resetQueries([{ scope: 'todos', entity: 'list' }])

// ğŸ™Œ invalidate all lists across all scopes
queryClient.invalidateQueries([{ entity: 'list' }])
```

ê³„ì¸µ êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤ë©´ ë²”ìœ„ê°€ ì¤‘ë³µë  ìˆ˜ ìˆì§€ë§Œ í•˜ìœ„ ë²”ìœ„ì— ì†í•˜ëŠ” ëª¨ë“  ë²”ìœ„ë¥¼ ì¼ì¹˜ì‹œí‚¨ë‹¤ë©´ ì´ ê¸°ëŠ¥ì´ ë§¤ìš° ìœ ìš©í•  ìˆ˜ ìˆì–´ìš”.

## **Is this worth it?**

í•­ìƒ ê·¸ë˜ ì˜¤ì§„ ì•Šì•˜ìŠµë‹ˆë‹¤ë§Œ, ìµœê·¼ ë“¤ì–´ ì´ëŸ° ì ‘ê·¼ ë°©ì‹ì„ ë§¤ìš° ì¢‹ì•„í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤(ê·¸ë˜ì„œ ì—¬ëŸ¬ë¶„ê³¼ ê³µìœ í•˜ê³  ì‹¶ì—ˆì–´ìš”). í•˜ì§€ë§Œ ë³µì¡ì„±ê³¼ íƒ€ì… ì•ˆì „ ì‚¬ì´ì—ëŠ” ë¶„ëª…íˆ ì ˆì¶©ì ì´ ìˆìŠµë‹ˆë‹¤. í‚¤ íŒ©í† ë¦¬ ë‚´ì—ì„œ ì¿¼ë¦¬ í‚¤ë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒì€ ì¢€ ë” ë³µì¡í•˜ë©°(ì¿¼ë¦¬ í‚¤ëŠ” ì—¬ì „íˆ ìµœìƒìœ„ ë ˆë²¨ì˜ ë°°ì—´ì´ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì—), í‚¤ íŒ©í† ë¦¬ ë°˜í™˜ íƒ€ì…ì— ë”°ë¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ëŠ” ê²ƒë„ ì‚¬ì†Œí•œ ê²ƒì´ ì•„ë‹ˆì£ . íŒ€ì´ ì‘ê³  api ì¸í„°í˜ì´ìŠ¤ê°€ ì ê±°ë‚˜ ì¼ë°˜ JavaScriptë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì´ëŸ° ë°©ë²•ì„ ì‚¬ìš©í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. í‰ì†Œì²˜ëŸ¼ íŠ¹ì • ìƒí™©ì— ê°€ì¥ ì í•©í•œ ë„êµ¬ì™€ ì ‘ê·¼ ë°©ì‹ì„ ì„ íƒí•´ì£¼ì„¸ìš” ğŸ™Œ